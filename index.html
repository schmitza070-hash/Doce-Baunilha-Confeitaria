<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Doce Baunilha — Cardápio (PIX)</title>
  <style>
    :root{--accent:#f05dd7;--muted:#666}
    *{box-sizing:border-box;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
    body{margin:0;background:linear-gradient(180deg,#fff,#f7f7f9);color:#111}
    header{background:linear-gradient(90deg,var(--accent),#ffb88c);padding:16px;color:#fff;display:flex;align-items:center;justify-content:space-between}
    header h1{margin:0;font-size:20px}
    .container{max-width:1100px;margin:20px auto;padding:0 16px}
    .grid{display:grid;grid-template-columns:1fr 360px;gap:20px}
    .menu{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}
    .product{background:#fff;border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(0,0,0,0.06);display:flex;flex-direction:column}
    .product img{width:100%;height:150px;object-fit:cover;border-radius:8px}
    .product h3{margin:8px 0 6px;font-size:16px}
    .product .desc{color:var(--muted);font-size:13px}
    .price{font-weight:700;margin-top:auto}
    button{background:var(--accent);border:0;color:white;padding:9px;border-radius:10px;cursor:pointer}
    aside{background:rgba(255,255,255,0.95);padding:14px;border-radius:12px;position:sticky;top:18px;height:fit-content;box-shadow:0 6px 18px rgba(0,0,0,0.04)}
    .cart-item{display:flex;gap:10px;margin-bottom:10px}
    .muted{color:var(--muted);font-size:13px}
    input,select,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid #e6e6e6;margin-bottom:8px}
    .small{font-size:13px}
    #pixInfo{margin-top:10px;text-align:center;padding:10px;border-radius:8px;background:#fff6f1;border:1px dashed rgba(240,138,93,0.4)}
    .pix-key{font-weight:700;font-size:18px;letter-spacing:1px}
    footer{padding:14px;text-align:center;color:var(--muted);font-size:13px;margin-top:24px}
    @media(max-width:920px){.grid{grid-template-columns:1fr}.container{padding:12px}}
  </style>
</head>
<body>
  <header>
    <h1>Doce Baunilha — Pedido Direto</h1>
    <div class="small">Pagamento: PIX • Frete por CEP</div>
  </header>

  <main class="container">
    <div class="grid">
      <section>
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
          <h2>Cardápio</h2>
          <div class="muted small">Adicione ao carrinho e pague tudo de uma vez</div>
        </div>

        <div class="menu" id="products"></div>
      </section>

      <aside>
        <h3>Seu pedido</h3>
        <div id="cartList"></div>

        <div style="margin-top:8px">
          <strong>Subtotal:</strong> R$ <span id="subtotal">0.00</span>
        </div>

        <div style="margin-top:8px">
          <label for="cep">CEP de entrega</label>
          <input id="cep" placeholder="Ex: 18119-175" />
          <div id="freteInfo" class="muted small">Digite o CEP para calcular o frete.</div>
        </div>

        <div style="margin-top:8px">
          <strong>Frete:</strong> R$ <span id="frete">0.00</span>
        </div>

        <div style="margin-top:8px">
          <strong>Total:</strong> R$ <span id="total">0.00</span>
        </div>

        <hr style="margin:10px 0">

        <label for="customerName">Nome</label>
        <input id="customerName" placeholder="Seu nome" />

        <label for="customerPhone">Telefone (WhatsApp)</label>
        <input id="customerPhone" placeholder="(99) 9 9999-9999" />

        <label for="address">Endereço (Rua, nº, bairro)</label>
        <textarea id="address" rows="2" placeholder="Rua, número, bairro, complemento"></textarea>

        <div style="display:flex;gap:8px;margin-top:8px">
          <button id="copyPixBtn">Copiar chave PIX</button>
          <button id="copyTotalBtn">Copiar valor total</button>
        </div>

        <div id="pixInfo">
          <div class="muted small">Chave PIX para pagamento (copie e cole no seu app bancário)</div>
          <div style="margin-top:6px" class="pix-key" id="pixKeyDisplay">15996380084</div>
        </div>

        <div style="margin-top:10px">
          <button id="sendWhats">Enviar pedido por WhatsApp</button>
        </div>

        <div style="margin-top:12px" class="muted small">
          <strong>Observação:</strong><br>
          Se o CEP não estiver na nossa tabela, aparecerá instrução para contato via WhatsApp para cálculo do frete.
        </div>
      </aside>
    </div>

    <footer>Hospede no GitHub Pages / Hostinger / No-IP — me diga se quer ZIP pra baixar</footer>
  </main>

<script>
/* ================== CONFIGURAÇÕES ================== */
const myWhats = '5515996380084'; // seu WhatsApp (com DDI + DDD)
const pixKeyVisible = '15996380084'; // chave PIX que o cliente deve copiar

/* ================== FRETE ================== */
const FRETE_TABLE = {
  '18119175': 0.00,
  '18119': 5.00,
  '18120': 8.00,
  '180': 15.00
};

/* ================== PRODUTOS ================== */
const PRODUCTS = [
  {id:'p1', name:'Bolo fatia Encanto de Valsa', desc:'Massa de chocolate molhadinha, com uma camada de brigadeiro cremoso 50% cacau e outra camada de recheio Sonho de Valsa. Geladinho ainda, difícil comer 01 só! Serve 1 pessoa (140g)', price:17.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419451291800834130/download.jpg?ex=68d1ce88&is=68d07d08&hm=9efdf54a633578e9bd32903b57c9ae450b36d1ad37399789199059099f087af3&=&format=webp'},
  {id:'p2', name:'Cone recheado de Ninho', desc:'Uma casquinha de sorvete crocante, recheada com brigadeiro de Ninho cremoso. Serve 1 pessoa (90g)', price:15.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419451662933692426/download_1.jpg?ex=68d1cee0&is=68d07d60&hm=6f26577b5b668e359f6b5b7d592dcc8973457a1982e4f0a0cac44772fe5c6a05&=&format=webp'},
  {id:'p3', name:'Pão de mel', desc:'Massa aromática de mel e especiarias, recheio cremoso de doce de leite, envolto em chocolate meio amargo. Serve 1 pessoa (90g)', price:13.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419451800519442504/download_2.jpg?ex=68d1cf01&is=68d07d81&hm=7f4c7746c7da436070f9d93a49ecba4d57aa2a96e596241bea0a9d59a2a8f308&=&format=webp'},
  {id:'p4', name:'Copo brownie Ninho com Nutella', desc:'Massa de brownie 50% cacau, intercalado com creme de Ninho e camada de Nutella. Serve 1 pessoa (220g)', price:23.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419451944283668570/download_3.jpg?ex=68d1cf23&is=68d07da3&hm=0ee85b401ec35c77f5ef65eba638bfbd889858b0deec485403432ef39517bfa1&=&format=webp'},
  {id:'p5', name:'Bolo fatia Encanto de Valsa (em dobro)', desc:'02 unidades de bolo fatia Encanto de Valsa. Serve 2 pessoas', price:30.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419452254259249314/download_4.jpg?ex=68d1cf6d&is=68d07ded&hm=82662dcdaa0c8cf7c68ee8960ceead803fbe85df4045296311be4c6a38250f33&=&format=webp'},
  {id:'p6', name:'Copo brownie duplo', desc:'01 copo brownie choconinho + 01 copo brownie Ninho com Nutella. Serve 2 pessoas', price:35.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419452395708088321/download_6.jpg?ex=68d1cf8f&is=68d07e0f&hm=95ee0e7edcb33a16283a4f6ac080dc5649643022d74ab2ab3347d1fbd419565e&=&format=webp'},
  {id:'p7', name:'Pavê de stikadinho (em dobro)', desc:'02 unidades de pavê de stikadinho. Serve 2 pessoas', price:28.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419452519335198864/download_8.jpg?ex=68d1cfac&is=68d07e2c&hm=942c63f57bac4e986bca0d53a4a85a68bd1f68c3ab9f34744f82a8dcd2700dc6&=&format=webp'},
  {id:'p8', name:'Brownie com gotas de chocolate', desc:'Brownie com sabor acentuado e intenso do chocolate, úmido e delicioso! Serve 1 pessoa (45g)', price:8.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419452911850618930/download_10.jpg?ex=68d1d00a&is=68d07e8a&hm=58af1b783a482d67e0cf092b94a5834980ca37b65cf1a0a045303666f0e25a53&=&format=webp'},
  {id:'p9', name:'Brownie com Oreo', desc:'Brownie com casquinha crocante e Oreo picado por cima. Serve 1 pessoa (50g)', price:8.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419453073469866204/download_18.jpg?ex=68d1d030&is=68d07eb0&hm=a3b59bcd88f3295fe044d6b813e9339c92c1c1f8fd83253dfc755c38938291a3&=&format=webp'},
  {id:'p10', name:'Pavê de stikadinho', desc:'Creme de morango com bolacha maisena e brigadeiro de colher com chocolate 50% cacau. Serve 1 pessoa (150g)', price:16.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419453196535070852/download_12.jpg?ex=68d1d04e&is=68d07ece&hm=fb728437c52e7dc5950a3358c8d61b14d8150055729fc5de095cce9a729b8151&=&format=webp'},
  {id:'p11', name:'Pavê tradicional', desc:'Biscoito maisena intercalado com creme belga suave e finalizado com brigadeiro de colher 50% cacau. Serve 1 pessoa (170g)', price:15.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419453212792193195/download_14.jpg?ex=68d1d052&is=68d07ed2&hm=c42bc45878f0869bb52160ac59ef8a86d5941d19bb568d04ff4ff044d43c09dc&=&format=webp'},
  {id:'p12', name:'Bolo de chocolate com cobertura de brigadeiro', desc:'Massa de chocolate coberta com brigadeiro cremoso, clássico e muito chocolatudo. Serve 1 pessoa (140g)', price:13.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419453483463082095/download_19.jpg?ex=68d1d092&is=68d07f12&hm=c5b5918a1463ab3e3a33746a2d90f82fe70f0f34beb8f74f361d7a0a423df52f&=&format=webp'},
  {id:'p13', name:'Cone recheado tipo Kinder Bueno', desc:'Casquinha crocante com recheio de Ninho, Nutella e Kinder Bueno. Serve 1 pessoa (90g)', price:17.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419453503385894922/download_20.jpg?ex=68d1d097&is=68d07f17&hm=1284d56219b547f6aa0c7347b3cb1df02c49b3338b9199da1c97a4cb27ab5b60&=&format=webp'},
  {id:'p14', name:'Copo brownie choconinho', desc:'Brownie 50% cacau intercalado com creme de Ninho e creme belga de chocolate. Serve 1 pessoa (220g)', price:16.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419453731749105787/download_21.jpg?ex=68d1d0cd&is=68d07f4d&hm=3a03781b414bd59fc1d2708e3a6b4dcc370619863c55f6decc3851ca3a327f90&=&format=webp'},
  {id:'p15', name:'Pavê tradicional (em dobro)', desc:'2 unidades de pavê tradicional. Serve 2 pessoas', price:28.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419453761629196348/download_14.jpg?ex=68d1d0d4&is=68d07f54&hm=f5f6e08d7d2ab7a4d1a591a73cb0d97b0cc2acad6de0da6d7f888e5c193502e3&=&format=webp'},
  {id:'p16', name:'Bolo no pote de Ninho (em dobro)', desc:'02 bolo no pote de Ninho. Serve 2 pessoas', price:28.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419438375831736411/download.jpg?ex=68d1c280&is=68d07100&hm=e65217e5c7b494458f46cd6a403941cfd9b803b2095ca4a5987293018533b814&=&format=webp'},
  {id:'p17', name:'Delicinha (combo)', desc:'01 pavê stikadinho + 01 bolo no pote de mousse de Ninho. Serve 2 pessoas', price:28.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419454016898994236/download_9.jpg?ex=68d1d111&is=68d07f91&hm=f40594e27a3ee8403fe0885bb8293e177fe8225536c89b144766fb4a136f1083&=&format=webp'},
  {id:'p18', name:'Brownie com confete colorido', desc:'Brownie úmido com confetes coloridos de chocolate. Serve 1 pessoa (45g)', price:8.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419454033458106399/download_23.jpg?ex=68d1d115&is=68d07f95&hm=c49d19cae9bd28d5fdba5456cced026a633ce48b085eb811f3e17358d8bde178&=&format=webp'},
  {id:'p19', name:'Cookie', desc:'Biscoito amanteigado, crocante, com gotas de chocolate. Serve 1 pessoa (50g)', price:6.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419454113158136040/download_11.jpg?ex=68d1d128&is=68d07fa8&hm=31929347d8877dc220cbdb6fea609686015d265b7b3c166cbd1fcae1551d03b0&=&format=webp'},
  {id:'p20', name:'Bolo no pote de Ninho', desc:'Massa de chocolate molhadinha com mousse de Ninho aveludada. Serve 1 pessoa (160g)', price:16.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419454134830239847/download_13.jpg?ex=68d1d12d&is=68d07fad&hm=cd2d2277d6beb2a91ab431a287f2dad0ccb1991e53060bc80d9f1e971aedc585&=&format=webp'},
  {id:'p21', name:'Afogadinho de brownie com Oreo', desc:'Creme belga com Oreo picado e pedaços de brownie. Serve 1 pessoa (140g)', price:13.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419454154740338748/download_15.jpg?ex=68d1d132&is=68d07fb2&hm=1474dc8beaa156ceca7f36eedf09e5f6db55c9ba09f715f90c935f8f258c4789&=&format=webp'},
  {id:'p22', name:'Refri Guaraná 200ml (Pet)', desc:'Refrigerante 200 ml', price:5.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419454552591171646/download_16.jpg?ex=68d1d191&is=68d08011&hm=e76a08387d2d1ea76a8a00dd9969b68d9479183b722bdaefb29fc616575af723&=&format=webp'},
  {id:'p23', name:'Coca-Cola Original 200ml', desc:'Garrafa 200 ml', price:5.50, img:'https://media.discordapp.net/attachments/1419426384002154558/1419454567615168632/download_17.jpg?ex=68d1d195&is=68d08015&hm=70eaf89fb007546571475bfae091b41b84b01a5c67a5f8ec16f0d06dc6c0fb87&=&format=webp'}
];

const PLACEHOLDER = 'https://via.placeholder.com/600x400?text=Doce+Baunilha';

/* ================== CARRINHO ================== */
const productsEl = document.getElementById('products');
const cartListEl = document.getElementById('cartList');
const subtotalEl = document.getElementById('subtotal');
const freteEl = document.getElementById('frete');
const totalEl = document.getElementById('total');
const cepInput = document.getElementById('cep');
const freteInfo = document.getElementById('freteInfo');
const pixKeyDisplay = document.getElementById('pixKeyDisplay');

let cart = {};
let currentFrete = 0;

function money(v){ return Number(v).toFixed(2); }

function renderProducts(){
  productsEl.innerHTML = '';
  PRODUCTS.forEach(p=>{
    const el = document.createElement('div');
    el.className='product';
    el.innerHTML = `
      <img src="${p.img || PLACEHOLDER}" alt="${p.name}" />
      <h3>${p.name}</h3>
      <div class="desc">${p.desc}</div>
      <div class="price">R$ ${money(p.price)}</div>
      <div style="display:flex;gap:8px;margin-top:8px">
        <button onclick="addToCart('${p.id}')">Adicionar</button>
      </div>
    `;
    productsEl.appendChild(el);
  });
}

function addToCart(id){ cart[id] = cart[id] ? cart[id]+1 : 1; renderCart(); }
function changeQty(id,delta){ cart[id] = Math.max(0,(cart[id]||0)+delta); if(cart[id]===0) delete cart[id]; renderCart(); }
function removeItem(id){ delete cart[id]; renderCart(); }

function calculateSubtotal(){
  let total=0;
  for(const id in cart){ total += PRODUCTS.find(p=>p.id===id).price*cart[id]; }
  return total;
}

function renderCart(){
  cartListEl.innerHTML='';
  let subtotal=calculateSubtotal();
  for(const id in cart){
    const p = PRODUCTS.find(x=>x.id===id);
    const qty = cart[id];
    const line=document.createElement('div');
    line.className='cart-item';
    line.innerHTML = `
      <div style="flex:1">
        <div><strong>${p.name}</strong></div>
        <div class="muted small">R$ ${money(p.price)} x ${qty}</div>
      </div>
      <div style="text-align:right">
        <div>R$ ${money(p.price*qty)}</div>
        <div style="display:flex;gap:6px;margin-top:6px">
          <button onclick="changeQty('${id}',-1)">-</button>
          <button onclick="changeQty('${id}',1)">+</button>
          <button onclick="removeItem('${id}')">rem</button>
        </div>
      </div>
    `;
    cartListEl.appendChild(line);
  }
  subtotalEl.innerText=money(subtotal);
  freteEl.innerText=money(currentFrete);
  totalEl.innerText=money(subtotal+currentFrete);
  // atualiza valor exibido para copiar
  document.getElementById('copyTotalBtn').dataset.amount = money(subtotal+currentFrete);
}

/* ================== FRETE ================== */
function normalizeCep(raw){return String(raw||'').replace(/\D/g,'');}
function lookupFreteByCep(cepDigits){
  if(!cepDigits || cepDigits.length<5) return null;
  if(FRETE_TABLE[cepDigits]!==undefined) return FRETE_TABLE[cepDigits];
  const keys = Object.keys(FRETE_TABLE).sort((a,b)=>b.length - a.length);
  for(const k of keys){ if(cepDigits.startsWith(k)) return FRETE_TABLE[k]; }
  return null;
}

cepInput.addEventListener('input', ()=>{
  const cep=normalizeCep(cepInput.value);
  if(cep.length===8){
    const f=lookupFreteByCep(cep);
    if(f===null){ freteInfo.innerText='CEP não atendido — entre em contato via WhatsApp.'; currentFrete=0; }
    else{ freteInfo.innerText='Frete calculado automaticamente.'; currentFrete=f; }
  }else{ freteInfo.innerText='Digite o CEP (apenas números ou com hífen).'; currentFrete=0; }
  renderCart();
});

/* ================== PIX - copiar chave/valor ================== */
pixKeyDisplay.innerText = pixKeyVisible;

function copyToClipboard(text){
  if(!navigator.clipboard) return fallbackCopy(text);
  return navigator.clipboard.writeText(text);
}
function fallbackCopy(text){
  const ta = document.createElement('textarea'); ta.value=text; document.body.appendChild(ta); ta.select(); try{ document.execCommand('copy'); }catch(e){} ta.remove();
}

document.getElementById('copyPixBtn').addEventListener('click', ()=>{
  copyToClipboard(pixKeyVisible).then(()=>{
    alert('Chave PIX ' + pixKeyVisible + ' copiada para a área de transferência.');
  }).catch(()=>{
    fallbackCopy(pixKeyVisible);
    alert('Chave PIX copiada (fallback).');
  });
});

document.getElementById('copyTotalBtn').addEventListener('click', ()=>{
  const amount = document.getElementById('copyTotalBtn').dataset.amount || '0.00';
  copyToClipboard(amount).then(()=>{
    alert('Valor total R$ ' + amount + ' copiado para a área de transferência.');
  }).catch(()=>{
    fallbackCopy(amount);
    alert('Valor total copiado (fallback).');
  });
});

/* ================== WHATSAPP ================== */
function sendWhats(){
  if(Object.keys(cart).length===0){ alert('Carrinho vazio'); return; }
  const name=document.getElementById('customerName').value||'Cliente';
  const phone=document.getElementById('customerPhone').value||'';
  const address=document.getElementById('address').value||'';
  const subtotal=calculateSubtotal();
  let text=`Pedido - ${name}%0A`;
  for(const id in cart){ const p=PRODUCTS.find(x=>x.id===id); text+=`${encodeURIComponent(p.name)} x${cart[id]} - R$ ${money(p.price*cart[id])}%0A`; }
  text+=`%0ASubtotal: R$ ${money(subtotal)}%0A`;
  text+=`%0AFrete: R$ ${money(currentFrete)}%0A`;
  text+=`%0ATotal: R$ ${money(subtotal+currentFrete)}%0A`;
  if(address) text+=`%0AEndereco: ${encodeURIComponent(address)}%0A`;
  text+=`%0AChave PIX para pagamento: ${encodeURIComponent(pixKeyVisible)}%0A`;
  text+=`%0AEnvio por site proprio.`;
  const url=`https://wa.me/${myWhats}?text=${text}`;
  window.open(url,'_blank');
}

document.getElementById('sendWhats').addEventListener('click', sendWhats);

/* inicializa */
renderProducts();
renderCart();
</script>
</body>
</html>
