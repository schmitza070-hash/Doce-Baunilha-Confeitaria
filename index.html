<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Doce Baunilha — Cardápio (Pagamento PagSeguro / PIX)</title>
  <style>
    :root{--accent:#f08a5d;--muted:#666}
    *{box-sizing:border-box;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif}
    body{margin:0;background:linear-gradient(180deg,#fff,#f7f7f9);color:#111}
    header{background:linear-gradient(90deg,var(--accent),#ffb88c);padding:16px;color:#fff;display:flex;align-items:center;justify-content:space-between}
    header h1{margin:0;font-size:20px}
    .container{max-width:1100px;margin:20px auto;padding:0 16px}
    .grid{display:grid;grid-template-columns:1fr 360px;gap:20px}
    .menu{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}
    .product{background:#fff;border-radius:12px;padding:12px;box-shadow:0 6px 18px rgba(0,0,0,0.06);display:flex;flex-direction:column}
    .product img{width:100%;height:150px;object-fit:cover;border-radius:8px}
    .product h3{margin:8px 0 6px;font-size:16px}
    .product .desc{color:var(--muted);font-size:13px}
    .price{font-weight:700;margin-top:auto}
    button{background:var(--accent);border:0;color:white;padding:9px;border-radius:10px;cursor:pointer}
    aside{background:rgba(255,255,255,0.95);padding:14px;border-radius:12px;position:sticky;top:18px;height:fit-content;box-shadow:0 6px 18px rgba(0,0,0,0.04)}
    .cart-item{display:flex;gap:10px;margin-bottom:10px}
    .muted{color:var(--muted);font-size:13px}
    input,select,textarea{width:100%;padding:8px;border-radius:8px;border:1px solid #e6e6e6;margin-bottom:8px}
    .small{font-size:13px}
    #pixQr{margin-top:10px;text-align:center;}
    footer{padding:14px;text-align:center;color:var(--muted);font-size:13px;margin-top:24px}
    @media(max-width:920px){.grid{grid-template-columns:1fr}.container{padding:12px}}
  </style>
</head>
<body>
  <header>
    <h1>Doce Baunilha — Pedido Direto</h1>
    <div class="small">Pagamento: PagSeguro / PIX • Frete por CEP</div>
  </header>

  <main class="container">
    <div class="grid">
      <section>
        <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:12px">
          <h2>Cardápio</h2>
          <div class="muted small">Adicione ao carrinho e pague tudo de uma vez</div>
        </div>

        <div class="menu" id="products"></div>
      </section>

      <aside>
        <h3>Seu pedido</h3>
        <div id="cartList"></div>

        <div style="margin-top:8px">
          <strong>Subtotal:</strong> R$ <span id="subtotal">0.00</span>
        </div>

        <div style="margin-top:8px">
          <label for="cep">CEP de entrega</label>
          <input id="cep" placeholder="Ex: 18119-175" />
          <div id="freteInfo" class="muted small">Digite o CEP para calcular o frete.</div>
        </div>

        <div style="margin-top:8px">
          <strong>Frete:</strong> R$ <span id="frete">0.00</span>
        </div>

        <div style="margin-top:8px">
          <strong>Total:</strong> R$ <span id="total">0.00</span>
        </div>

        <hr style="margin:10px 0">

        <label for="customerName">Nome</label>
        <input id="customerName" placeholder="Seu nome" />

        <label for="customerPhone">Telefone (WhatsApp)</label>
        <input id="customerPhone" placeholder="(99) 9 9999-9999" />

        <label for="address">Endereço (Rua, nº, bairro)</label>
        <textarea id="address" rows="2" placeholder="Rua, número, bairro, complemento"></textarea>

        <div style="display:flex;gap:8px;margin-top:8px">
          <button id="finalizeBtn">Finalizar (PagSeguro)</button>
          <button id="showPix">Pix</button>
        </div>

        <div id="pixQr"></div>

        <div style="margin-top:10px">
          <button id="sendWhats">Enviar pedido por WhatsApp</button>
        </div>

        <div style="margin-top:12px" class="muted small">
          <strong>Observação:</strong><br>
          Se o CEP não estiver na nossa tabela, aparecerá instrução para contato via WhatsApp para cálculo do frete.
        </div>
      </aside>
    </div>

    <footer>Hospede no GitHub Pages / Hostinger / No-IP — me diga se quer ZIP pra baixar</footer>
  </main>

  <!-- QRCode.js (gera o QR code do PIX) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<script>
/* ================== CONFIGURAÇÕES ================== */
const myWhats = '5515996380084'; // seu WhatsApp
const pixKey = '5515996380084';
const pagseguroEmail = 'alineschmitz122@gmail.com';
const pagseguroToken = '03da0411-0754-47aa-ae57-b5832cd9906423bc3b6f4b13ac8c764289bbd2219a2db6c0-7b5b-479f-956f-fad9692e8074';

/* ================== FRETE ================== */
const FRETE_TABLE = {
  '18119175': 0.00,
  '18119': 5.00,
  '18120': 8.00,
  '180': 15.00
};

/* ================== PRODUTOS ================== */
const PRODUCTS = [
  {id:'p1', name:'Bolo fatia Encanto de Valsa', desc:'Massa de chocolate molhadinha, com uma camada de brigadeiro cremoso 50% cacau e outra camada de recheio Sonho de Valsa. Geladinho ainda, difícil comer 01 só! Serve 1 pessoa (140g)', price:17.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419427405877084160/download.png'},
  {id:'p2', name:'Cone recheado de Ninho', desc:'Uma casquinha de sorvete crocante, recheada com brigadeiro de Ninho cremoso. Serve 1 pessoa (90g)', price:15.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419427461330112584/download_1.png'},
  {id:'p3', name:'Pão de mel', desc:'Massa aromática de mel e especiarias, recheio cremoso de doce de leite, envolto em chocolate meio amargo. Serve 1 pessoa (90g)', price:13.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419427479378071664/download_2.png'},
  {id:'p4', name:'Copo brownie Ninho com Nutella', desc:'Massa de brownie 50% cacau, intercalado com creme de Ninho e camada de Nutella. Serve 1 pessoa (220g)', price:23.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419427492531277865/download_3.png'},
  {id:'p5', name:'Bolo fatia Encanto de Valsa (em dobro)', desc:'02 unidades de bolo fatia Encanto de Valsa. Serve 2 pessoas', price:30.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419427507333238845/download_4.png'},
  {id:'p6', name:'Copo brownie duplo', desc:'01 copo brownie choconinho + 01 copo brownie Ninho com Nutella. Serve 2 pessoas', price:35.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419427542397358220/download_6.png'},
  {id:'p7', name:'Pavê de stikadinho (em dobro)', desc:'02 unidades de pavê de stikadinho. Serve 2 pessoas', price:28.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419427590522929203/download_8.png'},
  {id:'p8', name:'Brownie com gotas de chocolate', desc:'Brownie com sabor acentuado e intenso do chocolate, úmido e delicioso! Serve 1 pessoa (45g)', price:8.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419427643018969168/download_10.png'},
  {id:'p9', name:'Brownie com Oreo', desc:'Brownie com casquinha crocante e Oreo picado por cima. Serve 1 pessoa (50g)', price:8.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419429673632403578/download_18.png'},
  {id:'p10', name:'Pavê de stikadinho', desc:'Creme de morango com bolacha maisena e brigadeiro de colher com chocolate 50% cacau. Serve 1 pessoa (150g)', price:16.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419427677311602728/download_12.png'},
  {id:'p11', name:'Pavê tradicional', desc:'Biscoito maisena intercalado com creme belga suave e finalizado com brigadeiro de colher 50% cacau. Serve 1 pessoa (170g)', price:15.00, img:''},
  {id:'p12', name:'Bolo de chocolate com cobertura de brigadeiro', desc:'Massa de chocolate coberta com brigadeiro cremoso, clássico e muito chocolatudo. Serve 1 pessoa (140g)', price:13.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419429949583921172/download_19.png'},
  {id:'p13', name:'Cone recheado tipo Kinder Bueno', desc:'Casquinha crocante com recheio de Ninho, Nutella e Kinder Bueno. Serve 1 pessoa (90g)', price:17.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419430129892983006/download_20.png'},
  {id:'p14', name:'Copo brownie choconinho', desc:'Brownie 50% cacau intercalado com creme de Ninho e creme belga de chocolate. Serve 1 pessoa (220g)', price:16.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419430295446487101/download_21.png'},
  {id:'p15', name:'Pavê tradicional (em dobro)', desc:'2 unidades de pavê tradicional. Serve 2 pessoas', price:28.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419430558374690836/download_22.png'},
  {id:'p16', name:'Bolo no pote de Ninho (em dobro)', desc:'02 bolo no pote de Ninho. Serve 2 pessoas', price:28.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419438375831736411/download.jpg?ex=68d1c280&is=68d07100&hm=e65217e5c7b494458f46cd6a403941cfd9b803b2095ca4a5987293018533b814&=&format=webp'},
  {id:'p17', name:'Delicinha (combo)', desc:'01 pavê stikadinho + 01 bolo no pote de mousse de Ninho. Serve 2 pessoas', price:28.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419427628363808909/download_9.png'},
  {id:'p18', name:'Brownie com confete colorido', desc:'Brownie úmido com confetes coloridos de chocolate. Serve 1 pessoa (45g)', price:8.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419430907630063636/download_23.png'},
  {id:'p19', name:'Cookie', desc:'Biscoito amanteigado, crocante, com gotas de chocolate. Serve 1 pessoa (50g)', price:6.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419427657828925480/download_11.png'},
  {id:'p20', name:'Bolo no pote de Ninho', desc:'Massa de chocolate molhadinha com mousse de Ninho aveludada. Serve 1 pessoa (160g)', price:16.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419427694839337072/download_13.png'},
  {id:'p21', name:'Afogadinho de brownie com Oreo', desc:'Creme belga com Oreo picado e pedaços de brownie. Serve 1 pessoa (140g)', price:13.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419427730210164746/download_15.png'},
  {id:'p22', name:'Refri Guaraná 200ml (Pet)', desc:'Refrigerante 200 ml', price:5.00, img:'https://media.discordapp.net/attachments/1419426384002154558/1419427740209385602/download_16.png'},
  {id:'p23', name:'Coca-Cola Original 200ml', desc:'Garrafa 200 ml', price:5.50, img:'https://media.discordapp.net/attachments/1419426384002154558/1419427751655374919/download_17.png'}
];

const PLACEHOLDER = 'https://via.placeholder.com/600x400?text=Doce+Baunilha';

/* ================== CARRINHO ================== */
const productsEl = document.getElementById('products');
const cartListEl = document.getElementById('cartList');
const subtotalEl = document.getElementById('subtotal');
const freteEl = document.getElementById('frete');
const totalEl = document.getElementById('total');
const cepInput = document.getElementById('cep');
const freteInfo = document.getElementById('freteInfo');
const pixQrEl = document.getElementById('pixQr');

let cart = {};
let currentFrete = 0;

function money(v){ return Number(v).toFixed(2); }

function renderProducts(){
  productsEl.innerHTML = '';
  PRODUCTS.forEach(p=>{
    const el = document.createElement('div');
    el.className='product';
    el.innerHTML = `
      <img src="${p.img || PLACEHOLDER}" alt="${p.name}" />
      <h3>${p.name}</h3>
      <div class="desc">${p.desc}</div>
      <div class="price">R$ ${money(p.price)}</div>
      <div style="display:flex;gap:8px;margin-top:8px">
        <button onclick="addToCart('${p.id}')">Adicionar</button>
      </div>
    `;
    productsEl.appendChild(el);
  });
}

function addToCart(id){ cart[id] = cart[id] ? cart[id]+1 : 1; renderCart(); }
function changeQty(id,delta){ cart[id] = Math.max(0,(cart[id]||0)+delta); if(cart[id]===0) delete cart[id]; renderCart(); }
function removeItem(id){ delete cart[id]; renderCart(); }

function calculateSubtotal(){
  let total=0;
  for(const id in cart){ total += PRODUCTS.find(p=>p.id===id).price*cart[id]; }
  return total;
}

function renderCart(){
  cartListEl.innerHTML='';
  let subtotal=calculateSubtotal();
  for(const id in cart){
    const p = PRODUCTS.find(x=>x.id===id);
    const qty = cart[id];
    const line=document.createElement('div');
    line.className='cart-item';
    line.innerHTML = `
      <div style="flex:1">
        <div><strong>${p.name}</strong></div>
        <div class="muted small">R$ ${money(p.price)} x ${qty}</div>
      </div>
      <div style="text-align:right">
        <div>R$ ${money(p.price*qty)}</div>
        <div style="display:flex;gap:6px;margin-top:6px">
          <button onclick="changeQty('${id}',-1)">-</button>
          <button onclick="changeQty('${id}',1)">+</button>
          <button onclick="removeItem('${id}')">rem</button>
        </div>
      </div>
    `;
    cartListEl.appendChild(line);
  }
  subtotalEl.innerText=money(subtotal);
  freteEl.innerText=money(currentFrete);
  totalEl.innerText=money(subtotal+currentFrete);
}

/* ================== FRETE ================== */
function normalizeCep(raw){return String(raw||'').replace(/\D/g,'');}
function lookupFreteByCep(cepDigits){
  if(!cepDigits || cepDigits.length<5) return null;
  if(FRETE_TABLE[cepDigits]!==undefined) return FRETE_TABLE[cepDigits];
  const keys = Object.keys(FRETE_TABLE).sort((a,b)=>b.length - a.length);
  for(const k of keys){ if(cepDigits.startsWith(k)) return FRETE_TABLE[k]; }
  return null;
}

cepInput.addEventListener('input', ()=>{
  const cep=normalizeCep(cepInput.value);
  if(cep.length===8){
    const f=lookupFreteByCep(cep);
    if(f===null){ freteInfo.innerText='CEP não atendido — entre em contato via WhatsApp.'; currentFrete=0; }
    else{ freteInfo.innerText='Frete calculado automaticamente.'; currentFrete=f; }
  }else{ freteInfo.innerText='Digite o CEP (apenas números ou com hífen).'; currentFrete=0; }
  renderCart();
});

/* ================== PAGSEGURO ================== */
function openPagSeguroCheckout(){
  const subtotal = calculateSubtotal();
  if(subtotal<=0){ alert('Carrinho vazio'); return; }
  const itens=[];
  for(const id in cart){ const p=PRODUCTS.find(x=>x.id===id); itens.push(`${p.name} x${cart[id]}`); }
  const descricao = `Pedido Doce Baunilha - ${itens.join(' | ')}`;
  const total = subtotal+currentFrete;
  const amountStr = total.toFixed(2);

  const form=document.createElement('form');
  form.method='POST';
  form.action='https://ws.pagseguro.uol.com.br/v2/checkout';
  form.style.display='none';

  const addField=(name,value)=>{ const inp=document.createElement('input'); inp.type='hidden'; inp.name=name; inp.value=value; form.appendChild(inp); };
  addField('email',pagseguroEmail); addField('token',pagseguroToken); addField('currency','BRL');
  addField('itemId1','0001'); addField('itemDescription1',descricao.substring(0,100));
  addField('itemAmount1',amountStr); addField('itemQuantity1','1');
  const ref=`pedido_${Date.now()}`; addField('reference',ref);

  document.body.appendChild(form);
  alert('Você será redirecionado ao PagSeguro.');
  form.submit();
}

/* ================== PIX COM QR CODE ================== */
function showPixInfo(){
  const total = (calculateSubtotal()+currentFrete).toFixed(2);
  if(Number(total)==0){ alert('Carrinho vazio'); return; }
  pixQrEl.innerHTML=''; // limpa
  const pixPayload = `00020126360014BR.GOV.BCB.PIX0114${pixKey}520400005303986540${total.replace('.',',')}5802BR5913Doce Baunilha6009Votorantim62070503***6304`; // simplificado
  new QRCode(pixQrEl,{text:pixPayload,width:180,height:180});
  alert(`Total: R$ ${total}\nEscaneie o QR Code exibido para pagar.`);
}

/* ================== WHATSAPP ================== */
function sendWhats(){
  if(Object.keys(cart).length===0){ alert('Carrinho vazio'); return; }
  const name=document.getElementById('customerName').value||'Cliente';
  const phone=document.getElementById('customerPhone').value||'';
  const address=document.getElementById('address').value||'';
  const subtotal=calculateSubtotal();
  let text=`Pedido - ${name}%0A`;
  for(const id in cart){ const p=PRODUCTS.find(x=>x.id===id); text+=`${encodeURIComponent(p.name)} x${cart[id]} - R$ ${money(p.price*cart[id])}%0A`; }
  text+=`%0ASubtotal: R$ ${money(subtotal)}%0A`;
  text+=`%0AFrete: R$ ${money(currentFrete)}%0A`;
  text+=`%0ATotal: R$ ${money(subtotal+currentFrete)}%0A`;
  if(address) text+=`%0AEndereco: ${encodeURIComponent(address)}%0A`;
  text+=`%0AEnvio por site proprio.`;
  const url=`https://wa.me/${myWhats}?text=${text}`;
  window.open(url,'_blank');
}

/* ================== EVENTOS ================== */
document.getElementById('finalizeBtn').addEventListener('click', openPagSeguroCheckout);
document.getElementById('showPix').addEventListener('click', showPixInfo);
document.getElementById('sendWhats').addEventListener('click', sendWhats);

/* inicializa */
renderProducts();
renderCart();
</script>
</body>
</html>

